import React from 'react';
import { connect } from 'react-redux';
import { likeSong, unlikeSong, setSongDetails } from '../../actions/songActions';
import TextBoldL from '../text/text-bold-l';
import TextRegularM from '../text/text-regular-m';
import styles from "./song-card-s.module.css";

function SongCardS(props) {

  const isLiked = props.likedSongs.includes(props.data.id);

  const handleLike = (e) => {
    e.preventDefault();
    e.stopPropagation();

    if (isLiked) {
      props.unlikeSong(props.data.id);
    } else {
      props.likeSong(props.data.id);
    }
  };

  const handleClick = () => {
    props.setSongDetails(props.data);
  };

  return (
    <div className={styles.SongCardSBox}>
      <div className={styles.SongCardS} onClick={handleClick}>
        <div className={styles.ImgBox}>
          <img src={props.data.coverart} alt={props.data.title} />
        </div>
        <div className={styles.Title}>
          <TextBoldL>{props.data.title}</TextBoldL>
          <TextRegularM>{props.data.artist}</TextRegularM>
        </div>
      </div>

      <button
        onClick={handleLike}
        className={`${styles.LikeBtn} ${isLiked ? styles.Liked : ''}`}
      >
        {isLiked ? '‚ù§Ô∏è' : 'ü§ç'}
      </button>
    </div>
  );
}

const mapStateToProps = (state) => ({
  likedSongs: state.songs.likedSongs
});

export default connect(mapStateToProps, {
  likeSong,
  unlikeSong,
  setSongDetails
})(SongCardS);